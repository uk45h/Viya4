{"creationTimeStamp":"2021-10-01T12:00:28.117Z","modifiedTimeStamp":"2021-10-01T15:35:46.409Z","createdBy":"spllul","modifiedBy":"spllul","name":"Hash Join.step","displayName":"Hash Join.step","localDisplayName":"Hash Join.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","uri":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","uri":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","uri":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","uri":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","uri":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","uri":"/dataFlows/steps/83d05b79-bd76-4730-aec7-a56634e2b6ff","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"input1","displayName":"input1","localDisplayName":"input1","minEntries":1,"maxEntries":1,"type":"table"},{"name":"hashinput","displayName":"hashinput","localDisplayName":"hashinput","minEntries":1,"maxEntries":1,"type":"table"}],"outputPorts":[{"name":"outputtable1","displayName":"outputtable1","localDisplayName":"outputtable1","minEntries":1,"maxEntries":1,"type":"table","columnDelta":{"keepColumnArguments":["copydata"],"automaticMapping":[{"inputPort":"input1","inputPortName":"input1"}]},"requiresStructure":false}]},"ui":"{\n\t\"syntaxversion\": \"1.2.0\",\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"Params\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Params\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"Data\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Data\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"input1\",\n\t\t\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\t\t\"label\": \"main data\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"placeholder\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"datakey\",\n\t\t\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\t\t\"label\": \"Data key object\",\n\t\t\t\t\t\t\t\"table\": \"input1\",\n\t\t\t\t\t\t\t\"order\": true,\n\t\t\t\t\t\t\t\"columntype\": \"a\",\n\t\t\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\t\t\"min\": 1\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"hash\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"hash\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"$datakey\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"hashinput\",\n\t\t\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\t\t\"label\": \"Hash data\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"placeholder\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"hashkey\",\n\t\t\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\t\t\"label\": \"Hash key object\",\n\t\t\t\t\t\t\t\"table\": \"hashinput\",\n\t\t\t\t\t\t\t\"order\": true,\n\t\t\t\t\t\t\t\"columntype\": \"a\",\n\t\t\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\t\t\"min\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"columns\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"copy additional columns?\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"copydata\",\n\t\t\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\t\t\"label\": \"Select data to copy\",\n\t\t\t\t\t\t\t\"table\": \"hashinput\",\n\t\t\t\t\t\t\t\"order\": true,\n\t\t\t\t\t\t\t\"columntype\": \"a\",\n\t\t\t\t\t\t\t\"max\": 0,\n\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\"visible\": \"$columns\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"output\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Output\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outputtable1\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Output table\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"debuger\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Debug options\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"values\": {\n\t\t\"input1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"datakey\": [],\n\t\t\"hashinput\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"hashkey\": [],\n\t\t\"copydata\": [],\n\t\t\"outputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t}\n}","templates":{"SAS":"%macro debugger;\n%if &debuger=1 %then %do;\n\toptions mprint;\n%end;\n%mend;\n%debugger\n/* SAS templated code goes here */\nproc contents data=&hashinput noprint out=hashinfo;\nrun;\ndata _null_;\n\tset hashinfo;\n\tif type=2 then\n\t\tcall symput(name,\"$\"||strip(put(length,10.)));\n\telse\n\t\tcall symput(name,strip(put(length,10.)));\nrun;\n%macro hash;\ndata &outputtable1;\n\tset &input1;\n\t%if &columns=1 %then %do;\n\t\tlength %do i=1 %to &copydata_count;\n\t\t\t&&copydata_&i._name &&&&&&copydata_&i._name\n\t\t%end;;\n\t%end;\n\tif _n_=1 then do;\n\t\tdeclare hash h(dataset: \"&hashinput(rename=(&hashkey_1_name=&datakey_1_name))\");\n\t    rc = h.defineKey(\"&datakey_1_name\");\n\t\t%if &columns=1 %then %do;\n\t\t\trc = h.defineData(%do i=1 %to &copydata_count; \"&&copydata_&i._name\", %end; \"&datakey_1_name\");\n\t\t%end;\n\t    rc = h.defineDone();\n\tend;\n\trc = h.find();\nrun;\n%mend;\n%hash;\n"}}